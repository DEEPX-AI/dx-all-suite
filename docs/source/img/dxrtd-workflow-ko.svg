<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 900" width="1000" height="900">
  <defs>
    <style>
      .box { fill: #f0f0f0; stroke: #333; stroke-width: 2; }
      .decision { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .success { fill: #c8e6c9; stroke: #388e3c; stroke-width: 2; }
      .failure { fill: #ffcdd2; stroke: #d32f2f; stroke-width: 2; }
      .line { stroke: #333; stroke-width: 2; fill: none; }
      .arrow { fill: #333; }
      .text { font-family: 'Noto Sans KR', Arial, sans-serif; font-size: 14px; text-anchor: middle; }
      .text-small { font-family: 'Noto Sans KR', Arial, sans-serif; font-size: 12px; text-anchor: middle; }
      .text-hint { font-family: 'Noto Sans KR', Arial, sans-serif; font-size: 11px; text-anchor: start; fill: #666; }
      .title { font-family: 'Noto Sans KR', Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" class="arrow" />
    </marker>
  </defs>
  
  <!-- Title -->
  <rect x="50" y="20" width="900" height="50" class="box"/>
  <text x="500" y="50" class="title">docker_run.sh --target=dx-runtime</text>
  
  <!-- Arrow down -->
  <line x1="500" y1="70" x2="500" y2="100" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- Check dxrtd process -->
  <rect x="350" y="100" width="300" height="60" class="decision"/>
  <text x="500" y="125" class="text">dxrtd 프로세스 위치 확인</text>
  <text x="500" y="145" class="text-small">(check_dxrtd_process)</text>
  
  <!-- Split arrows -->
  <line x1="500" y1="160" x2="500" y2="190" class="line"/>
  <line x1="500" y1="190" x2="250" y2="190" class="line" marker-end="url(#arrowhead)"/>
  <line x1="500" y1="190" x2="750" y2="190" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- Left branch: disable_dxrt_service option -->
  <rect x="100" y="190" width="300" height="60" class="decision"/>
  <text x="250" y="215" class="text">--disable_dxrt_service</text>
  <text x="250" y="235" class="text">옵션 사용?</text>
  
  <!-- Right branch: Normal mode -->
  <rect x="600" y="190" width="300" height="60" class="decision"/>
  <text x="750" y="215" class="text">일반 모드</text>
  <text x="750" y="235" class="text-small">(기본값)</text>
  
  <!-- Left branch split -->
  <line x1="250" y1="250" x2="250" y2="280" class="line"/>
  <line x1="250" y1="280" x2="150" y2="280" class="line" marker-end="url(#arrowhead)"/>
  <line x1="250" y1="280" x2="350" y2="280" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- Right branch split -->
  <line x1="750" y1="250" x2="750" y2="280" class="line"/>
  <line x1="750" y1="280" x2="650" y2="280" class="line" marker-end="url(#arrowhead)"/>
  <line x1="750" y1="280" x2="850" y2="280" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- dxrtd found boxes -->
  <rect x="50" y="280" width="100" height="60" class="decision"/>
  <text x="100" y="305" class="text-small">dxrtd</text>
  <text x="100" y="320" class="text-small">발견?</text>
  <text x="100" y="335" class="text-small">없음</text>
  
  <rect x="250" y="280" width="100" height="60" class="decision"/>
  <text x="300" y="305" class="text-small">dxrtd</text>
  <text x="300" y="320" class="text-small">발견?</text>
  <text x="300" y="335" class="text-small">있음</text>
  
  <rect x="550" y="280" width="100" height="60" class="decision"/>
  <text x="600" y="305" class="text-small">dxrtd</text>
  <text x="600" y="320" class="text-small">발견?</text>
  <text x="600" y="335" class="text-small">없음</text>
  
  <rect x="750" y="280" width="100" height="60" class="decision"/>
  <text x="800" y="305" class="text-small">dxrtd</text>
  <text x="800" y="320" class="text-small">발견?</text>
  <text x="800" y="335" class="text-small">있음</text>
  
  <!-- Arrows down from dxrtd boxes -->
  <line x1="100" y1="340" x2="100" y2="370" class="line" marker-end="url(#arrowhead)"/>
  <line x1="300" y1="340" x2="300" y2="370" class="line" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="340" x2="600" y2="370" class="line" marker-end="url(#arrowhead)"/>
  <line x1="800" y1="340" x2="800" y2="370" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- Result boxes -->
  <!-- Failure box (left) -->
  <rect x="30" y="370" width="140" height="80" class="failure"/>
  <text x="100" y="395" class="text-small">❌ 실패</text>
  <text x="100" y="415" class="text-small">경고와 함께</text>
  <text x="100" y="435" class="text-small">차단</text>
  
  <!-- Success box (left-center) -->
  <rect x="230" y="370" width="140" height="80" class="success"/>
  <text x="300" y="395" class="text-small">✅ 시작</text>
  <text x="300" y="415" class="text-small">(외부 dxrtd</text>
  <text x="300" y="435" class="text-small">사용)</text>
  
  <!-- Success box (right-center) -->
  <rect x="530" y="370" width="140" height="80" class="success"/>
  <text x="600" y="395" class="text-small">✅ 시작</text>
  <text x="600" y="415" class="text-small">(내부 dxrtd</text>
  <text x="600" y="435" class="text-small">사용)</text>
  
  <!-- Check override box (right) -->
  <rect x="710" y="370" width="180" height="80" class="decision"/>
  <text x="800" y="395" class="text-small">docker-compose.yml</text>
  <text x="800" y="415" class="text-small">수정으로 dxrtd</text>
  <text x="800" y="435" class="text-small">비활성화?</text>
  
  <!-- Arrows from override box -->
  <line x1="800" y1="450" x2="800" y2="480" class="line"/>
  <line x1="800" y1="480" x2="750" y2="480" class="line" marker-end="url(#arrowhead)"/>
  <line x1="800" y1="480" x2="850" y2="480" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- Yes/No boxes -->
  <rect x="680" y="480" width="70" height="40" class="success"/>
  <text x="715" y="505" class="text-small">예</text>
  
  <rect x="820" y="480" width="70" height="40" class="failure"/>
  <text x="855" y="505" class="text-small">아니오</text>
  
  <!-- Arrows down -->
  <line x1="715" y1="520" x2="715" y2="550" class="line" marker-end="url(#arrowhead)"/>
  <line x1="855" y1="520" x2="855" y2="550" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- Final result boxes -->
  <rect x="640" y="550" width="150" height="70" class="success"/>
  <text x="715" y="575" class="text-small">✅ 시작</text>
  <text x="715" y="595" class="text-small">(수동</text>
  <text x="715" y="610" class="text-small">설정)</text>
  
  <rect x="800" y="550" width="120" height="70" class="failure"/>
  <text x="860" y="575" class="text-small">❌ 실패</text>
  <text x="860" y="595" class="text-small">3가지</text>
  <text x="860" y="610" class="text-small">옵션</text>
  
  <!-- Hint arrows from failure boxes -->
  <line x1="100" y1="450" x2="100" y2="650" class="line" marker-end="url(#arrowhead)"/>
  <line x1="860" y1="620" x2="860" y2="650" class="line" marker-end="url(#arrowhead)"/>
  
  <!-- Hint box (left, for disable_dxrt_service failure) -->
  <rect x="10" y="650" width="380" height="100" rx="5" ry="5" style="fill: #fff3cd; stroke: #856404; stroke-width: 1;"/>
  <text x="20" y="670" class="text-hint">⚠️ 경고: disable_dxrt_service 옵션은 외부 dxrtd 필요</text>
  <text x="20" y="690" class="text-hint">힌트 1: 호스트에서 dxrtd 시작 (sudo systemctl start dxrt.service)</text>
  <text x="20" y="710" class="text-hint">힌트 2: disable_dxrt_service 옵션 없이 실행</text>
  
  <!-- Hint box (right - for normal mode failure) -->
  <rect x="610" y="650" width="380" height="120" rx="5" ry="5" style="fill: #fff3cd; stroke: #856404; stroke-width: 1;"/>
  <text x="620" y="670" class="text-hint">⚠️ 경고: dxrtd가 이미 실행 중</text>
  <text x="620" y="690" class="text-hint">힌트 1: disable_dxrt_service 옵션 사용 (권장)</text>
  <text x="620" y="710" class="text-hint">힌트 2: docker-compose.yml 수동 수정</text>
  <text x="620" y="730" class="text-hint">힌트 3: 외부 dxrtd 서비스 중지</text>
  
  <!-- Legend -->
  <rect x="50" y="800" width="900" height="80" rx="5" ry="5" style="fill: #f9f9f9; stroke: #ccc; stroke-width: 1;"/>
  <text x="70" y="825" class="text" style="text-anchor: start; font-weight: bold;">범례:</text>
  <text x="70" y="850" class="text" style="text-anchor: start;">✅ = 컨테이너 시작 성공</text>
  <text x="70" y="870" class="text" style="text-anchor: start;">❌ = 가이드와 함께 컨테이너 시작 차단</text>
  
  <text x="500" y="850" class="text" style="text-anchor: start; font-weight: bold;">핵심 사항:</text>
  <text x="500" y="870" class="text-small" style="text-anchor: start;">• disable_dxrt_service 옵션 사용 시: 컨테이너는 외부 dxrtd 필요</text>
</svg>
